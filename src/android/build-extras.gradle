
def packageName = getPackageName()
def cleanPackagename = getCleanPackagename()

android {
    defaultConfig {
        applicationId packageName
        manifestPlaceholders = [cleanPackagename:cleanPackagename]
    }
}

dependencies {
    compile 'com.braintreepayments.api:braintree:2.6.2'
    compile 'com.braintreepayments.api:drop-in:3.1.0'
    compile 'io.card:android-sdk:5.5.1'
}

def getPackageName() {
    def config;
    if (file("src/main/res/xml/config.xml").exists()) {
        // cordova-android >= 7.0.0
        config = file("src/main/res/xml/config.xml").getText()
    } else {
        // cordova-android < 7.0.0
        config = file("res/xml/config.xml").getText()
    }

    def xml = new XmlParser(false, false).parseText(config)
    return xml.attribute("id")
}

def getCleanPackagename() {
    def packageName = getPackageName();
    return packageName.replace('_', '').toLowerCase();
}
